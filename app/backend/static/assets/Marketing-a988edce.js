import{bA as $,r as t,bB as e}from"./vendor-c3fe08cd.js";import{u as T,r as b,i as Z,g as J,h as Ce,R as fe,G as _e,V as ie,S as Te,E as be,Q as ye,A as je,a as V,b as ke,c as Ie,T as Ae,d as Ne,m as Be}from"./index-24276f89.js";import{S as h,k as re,T as y,I as we,m as Pe,l as Fe,D as ze,C as le}from"./fluentui-react-3f437ee8.js";import{h as Oe}from"./fluentui-icons-cc8a82c3.js";const Re="_oneshotContainer_1peuc_1",Ee="_oneshotTopSection_1peuc_15",Ge="_oneshotBottomSection_1peuc_29",Le="_oneshotTitle_1peuc_49",Me="_oneshotQuestionInput_1peuc_79",Qe="_oneshotAnswerContainer_1peuc_93",Ue="_oneshotAnalysisPanel_1peuc_107",qe="_oneshotSettingsSeparator_1peuc_117",De="_settingsButton_1peuc_125",o={oneshotContainer:Re,oneshotTopSection:Ee,oneshotBottomSection:Ge,oneshotTitle:Le,oneshotQuestionInput:Me,oneshotAnswerContainer:Qe,oneshotAnalysisPanel:Ue,oneshotSettingsSeparator:qe,settingsButton:De},Ke="_evaluationContainer_1jfqt_1",We="_evaluationInputTextContainer_1jfqt_11",He="_evaluationInputContainer_1jfqt_25",Ve="_evaluationInputTextArea_1jfqt_39",Ze="_evaluationInputButtonsContainer_1jfqt_49",a={evaluationContainer:Ke,evaluationInputTextContainer:We,evaluationInputContainer:He,evaluationInputTextArea:Ve,evaluationInputButtonsContainer:Ze},ce=T?$().instance:void 0,ue={dropdown:{width:300}},Je=[{key:"ja",text:"Ja"},{key:"teils",text:"Teils"},{key:"nein",text:"Nein"},{key:"nicht beurteilbar",text:"Nicht beurteilbar"}],$e=[{key:"Zeitersparnis",text:"Zeitersparnis"},{key:"Inspiration / Input",text:"Inspiration / Input"},{key:"Sonstiges, siehe unten:",text:"Sonstiges, siehe unten:"}],Xe=({disabled:L,question:j,answer:d,tabName:M})=>{const[k,Q]=t.useState(!1),{instance:I}=$();b&&Z(I);const[U,S]=t.useState(""),[A,N]=t.useState([]),X=(i,n)=>{n?n.length<=1e3&&S(n):S("")},[B,w]=t.useState(""),q=(i,n)=>{n?n.length<=1e3&&w(n):w("")},[D,v]=t.useState(""),Y=(i,n)=>{n?n.length<=5e3&&v(n):v("")},[P,F]=t.useState(""),z=(i,n)=>{n?n.length<=1e3&&F(n):F("")},ee=(i,n,g)=>{if(!n){console.log("Keine Auswahl!");return}const l=[...A];if(n.selected)l.push(n);else{const x=l.findIndex(E=>E.key===n.key);x!==-1&&l.splice(x,1)}N(l)},O=async()=>{const i=ce?await J(ce):void 0,n=d.choices[0].context.thoughts[1].description,g=[];if(n.length>0)for(const r of n)"sourcepage"in r&&g.push(r.sourcepage);const l=new Date,x=A.map(r=>r.text),E={TabName:M,Frage:d.choices[0].context.thoughts[0].description,AntwortChatGPT:d.choices[0].message.content,Kontext:g,Korrektheit:u?.text,korrekte_Antwort:B,Benefit:x,BenefitMinuten:D,Sonstiges:P,Benutzer:U,Zeitstempel:l,model:"gpt-4"},K=JSON.stringify(E)+`
`;try{const r=await Ce(K,i)}catch(r){console.log(r)}finally{Q(!0),S(""),F(""),w(""),N([]),R(void 0),setTimeout(()=>{Q(!1)},6e3)}},[u,R]=t.useState();return e.jsxs("div",{children:[k&&e.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#9CBF2B",padding:"10px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"},children:e.jsx("p",{children:"Gespeichert!"})}),e.jsxs(h,{className:a.evaluationContainer,children:[e.jsx(h,{horizontal:!0,className:a.evaluationInputContainer,children:e.jsx(re,{label:"Ist die Antwort inhaltlich korrekt?",selectedKey:u?u.key:void 0,onChange:(i,n,g)=>{R(n)},placeholder:"Wähle eine Option",options:Je,styles:ue})}),(u?.text==="Nein"||u?.text==="Teils"||u?.text==="Nicht beurteilbar")&&e.jsx("div",{children:e.jsx(h,{horizontal:!0,className:a.evaluationInputTextContainer,children:e.jsx(y,{className:a.evaluationInputTextContainer,resizable:!1,placeholder:"Was hat nicht gepasst?",value:B,onChange:q})})}),e.jsx(h,{horizontal:!0,className:a.evaluationInputContainer,children:e.jsx(re,{label:"Was hat dir die Antwort gebracht?",selectedKeys:A?.map(i=>i.key.toString()),onChange:ee,placeholder:"Wähle eine Option",options:$e,styles:ue,multiSelect:!0})}),e.jsx(h,{horizontal:!0,className:a.evaluationInputTextContainer,children:e.jsx(y,{className:a.evaluationInputTextContainer,resizable:!1,placeholder:"Wieviel Zeitersparnis (in Minuten) hat dir Athena gebracht?",value:D,onChange:Y})}),e.jsx(h,{horizontal:!0,className:a.evaluationInputTextContainer,children:e.jsx(y,{className:a.evaluationInputTextContainer,resizable:!1,placeholder:"Sonstiges: ",value:P,onChange:z})}),e.jsx(h,{horizontal:!0,className:a.evaluationInputTextContainer,children:e.jsx(y,{className:a.evaluationInputTextContainer,resizable:!1,placeholder:"Bitte gib deinen Namen an: ",value:U,onChange:X})}),e.jsx(h,{horizontal:!0,className:a.evaluationInputButtonsContainer,children:e.jsx(we,{style:{color:"black",marginLeft:"10px"},iconProps:{iconName:"Save"},title:"Speichern",ariaLabel:"Speichern",onClick:()=>O()})})]})]})};function Ye(){const[L,j]=t.useState(!1),[d,M]=t.useState(""),[k,Q]=t.useState(""),[I,U]=t.useState(""),[S,A]=t.useState(fe.Hybrid),[N,X]=t.useState(4),[B,w]=t.useState(!0),[q,D]=t.useState(!1),[v,Y]=t.useState(!1),[P,F]=t.useState(_e.TextAndImages),[z,ee]=t.useState(""),[O,u]=t.useState(""),[R,i]=t.useState([ie.Embedding,ie.ImageEmbedding]),[n,g]=t.useState(!1),[l,x]=t.useState(!1),[E,K]=t.useState(!1),r=t.useRef(""),[C,te]=t.useState(!1),[f,ne]=t.useState(),[p,pe]=t.useState(),[se,oe]=t.useState(),[G,_]=t.useState(void 0),m=T?$().instance:void 0,he=async()=>{const s=m?await J(m):void 0;Ne(s).then(c=>{K(c.showGPT4VOptions)})};t.useEffect(()=>{he()},[]);const W=async s=>{r.current=s,f&&ne(void 0),te(!0),oe(void 0),_(void 0);const c=m?await J(m):void 0;try{const H={messages:[{content:s,role:"user"}],context:{overrides:{prompt_template:d.length===0?void 0:d,prompt_template_prefix:k.length===0?void 0:k,prompt_template_suffix:I.length===0?void 0:I,exclude_category:z.length===0?void 0:z,top:N,retrieval_mode:S,semantic_ranker:B,semantic_captions:q,use_oid_security_filter:n,use_groups_security_filter:l,vector_fields:R,use_gpt4v:v,gpt4v_input:P}},session_state:p?p.choices[0].session_state:null},ve=await Be(H,c);pe(ve)}catch(H){ne(H)}finally{te(!1)}},de=(s,c)=>{M(c||"")},ge=s=>{W(s),u(s)},xe=s=>{se===s&&G===V.CitationTab?_(void 0):(oe(s),_(V.CitationTab))},ae=s=>{_(G===s?void 0:s)},me=(s,c)=>{g(!!c)},Se=(s,c)=>{x(!!c)};return e.jsxs("div",{className:o.oneshotContainer,children:[e.jsxs("div",{className:o.oneshotTopSection,children:[e.jsx(Te,{className:o.settingsButton,onClick:()=>j(!L)}),e.jsx("h2",{children:"Athena KI-Testphase: Feedback zur Qualität im Formular unter der Antwort & im Teamskanal erwünscht!"}),e.jsx(Oe,{fontSize:"120px",primaryFill:"#9CBF2B","aria-hidden":"true","aria-label":"Chatgpt logo"}),e.jsx("h1",{className:o.oneshotTitle,children:"Lass dir Texte mit der PCS Wissensdatenbank erstellen. Hier zwei Beispiele:"}),e.jsx(be,{onExampleClicked:ge,useGPT4V:v,tabName:"marketing"}),e.jsx("div",{className:o.oneshotQuestionInput,children:e.jsx(ye,{placeholder:"... ?",disabled:C,initQuestion:O,onSend:s=>W(s)})})]}),e.jsxs("div",{className:o.oneshotBottomSection,children:[C&&e.jsx(Pe,{label:"Athena arbeitet ..."}),!C&&p&&!f&&e.jsx("div",{className:o.oneshotAnswerContainer,children:e.jsx(je,{answer:p,isStreaming:!1,onCitationClicked:s=>xe(s),onThoughtProcessClicked:()=>ae(V.ThoughtProcessTab)})}),f?e.jsx("div",{className:o.oneshotAnswerContainer,children:e.jsx(ke,{error:f.toString(),onRetry:()=>W(r.current)})}):null,G&&p&&e.jsx(Ie,{className:o.oneshotAnalysisPanel,activeCitation:se,onActiveTabChanged:s=>ae(s),citationHeight:"600px",answer:p,activeTab:G})]}),e.jsx("div",{className:o.oneshotBottomSection,children:e.jsx("div",{className:o.oneshotQuestionInput,children:!C&&p&&!f&&e.jsx(Xe,{disabled:C,question:O,answer:p,tabName:"marketing"})})}),e.jsxs(Fe,{headerText:"Konfigurieren Sie die Erstellung von Antworten",isOpen:L,isBlocking:!1,onDismiss:()=>j(!1),closeButtonAriaLabel:"Close",onRenderFooterContent:()=>e.jsx(ze,{onClick:()=>j(!1),children:"Close"}),isFooterAtBottom:!0,children:[e.jsx(y,{className:o.oneshotSettingsSeparator,defaultValue:d,label:"Prompt Vorlage überschreiben",multiline:!0,autoAdjustHeight:!0,onChange:de}),T&&e.jsx(le,{className:o.oneshotSettingsSeparator,checked:n||b,label:"Use oid security filter",disabled:!Z(m)||b,onChange:me}),T&&e.jsx(le,{className:o.oneshotSettingsSeparator,checked:l||b,label:"Use groups security filter",disabled:!Z(m)||b,onChange:Se}),T&&e.jsx(Ae,{})]})]})}Ye.displayName="Marketing";export{Ye as Component};
//# sourceMappingURL=Marketing-a988edce.js.map
