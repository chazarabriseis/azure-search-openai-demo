import{bA as J,bB as e,bC as ct,bD as Q,bE as lt,bF as ut,r,bG as qe,bH as dt,bI as ht,bJ as pt,bK as gt,bL as mt,bM as xt,bN as _t,bO as ft,bP as vt,bQ as Ct,bR as K,bS as St}from"./vendor-c3fe08cd.js";import{D as $e,S as m,I as Ue,P as yt,T as W,a as kt,B as je,b as bt,c as Pe,d as Ee,L as jt,e as wt,f as Tt,g as Be,h as Nt,i as At,j as It,k as ve,l as Lt,C as Re}from"./fluentui-react-3f437ee8.js";import{e as Pt,E as Et,f as Bt,g as Rt,D as Mt,h as zt}from"./fluentui-icons-cc8a82c3.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();const Ot=".auth/me",Ft=".auth/logout?post_logout_redirect_uri=/";async function Dt(){const t=await fetch("/auth_setup");if(!t.ok)throw new Error(`auth setup response was not ok: ${t.status}`);return await t.json()}const Z=await Dt(),z=Z.useLogin,V=Z.requireAccessControl,Gt=Z.msalConfig,qt=Z.loginRequest,$t=Z.tokenRequest,He=()=>window.location.origin+Z.msalConfig.auth.redirectUri,Ut=()=>fetch(Ot).then(t=>t.ok?t.json().then(n=>n.length>0?{id_token:n[0].id_token,access_token:n[0].access_token,user_claims:n[0].user_claims.reduce((s,i)=>(s[i.typ]=i.val,s),{})}:null):null),G=await Ut(),Ht=()=>{window.location.href=Ft},le=t=>t?.getActiveAccount()!=null||G!=null,ye=t=>G?Promise.resolve(G.access_token):t.acquireTokenSilent({...$t,redirectUri:He()}).then(n=>n.accessToken).catch(n=>{console.log(n)});const Qt="_layout_o4bzc_1",Kt="_header_o4bzc_13",Wt="_headerContainer_o4bzc_23",Vt="_headerTitleContainer_o4bzc_39",Jt="_headerLogo_o4bzc_55",Zt="_headerTitle_o4bzc_39",Xt="_headerNavList_o4bzc_73",Yt="_headerNavPageLink_o4bzc_85",en="_headerNavPageLinkActive_o4bzc_113",tn="_headerNavLeftMargin_o4bzc_123",nn="_headerRightText_o4bzc_131",sn="_microsoftLogo_o4bzc_141",an="_githubLogo_o4bzc_151",p={layout:Qt,header:Kt,headerContainer:Wt,headerTitleContainer:Vt,headerLogo:Jt,headerTitle:Zt,headerNavList:Xt,headerNavPageLink:Yt,headerNavPageLinkActive:en,headerNavLeftMargin:tn,headerRightText:nn,microsoftLogo:sn,githubLogo:an},on="_loginButton_l76ou_1",rn={loginButton:on},cn=()=>{const{instance:t}=J(),n=t.getActiveAccount(),s=(n||G)!=null,i=()=>{t.loginPopup({...qt,redirectUri:He()}).catch(o=>console.log(o))},a=()=>{n?t.logoutPopup({mainWindowRedirectUri:"/",account:t.getActiveAccount()}).catch(o=>console.log(o)):Ht()},c=`Logout
${n?.username??G?.user_claims?.preferred_username}`;return e.jsx($e,{text:s?c:"Login",className:rn.loginButton,onClick:s?a:i})},Me=()=>e.jsxs("div",{className:p.layout,children:[e.jsx("header",{className:p.header,role:"banner",style:{backgroundColor:"#9CBF2B"},children:e.jsxs("div",{className:p.headerContainer,children:[e.jsx(ct,{to:"/",className:p.headerTitleContainer,children:e.jsx("h3",{className:p.headerTitle,children:"PCS - ATHENA KI"})}),e.jsx("nav",{children:e.jsxs("ul",{className:p.headerNavList,children:[e.jsx("li",{children:e.jsx(Q,{to:"/",className:({isActive:t})=>t?p.headerNavPageLinkActive:p.headerNavPageLink,children:"Chat"})}),e.jsx("li",{className:p.headerNavLeftMargin,children:e.jsx(Q,{to:"/qa",className:({isActive:t})=>t?p.headerNavPageLinkActive:p.headerNavPageLink,children:"Q&A"})}),e.jsx("li",{className:p.headerNavLeftMargin,children:e.jsx(Q,{to:"/qadetail",className:({isActive:t})=>t?p.headerNavPageLinkActive:p.headerNavPageLink,children:"Q&A Detail"})}),e.jsx("li",{className:p.headerNavLeftMargin,children:e.jsx(Q,{to:"/marketing",className:({isActive:t})=>t?p.headerNavPageLinkActive:p.headerNavPageLink,children:"PM/MarCom"})}),e.jsx("li",{className:p.headerNavLeftMargin,children:e.jsx(Q,{to:"/chatgpt",className:({isActive:t})=>t?p.headerNavPageLinkActive:p.headerNavPageLink,children:"ChatGPT original"})}),e.jsx("li",{className:p.headerNavLeftMargin,children:e.jsx(Q,{to:"/info",className:({isActive:t})=>t?p.headerNavPageLinkActive:p.headerNavPageLink,children:"Info"})})]})}),e.jsx("h4",{className:p.headerRightText,children:"Beta Phase"}),z&&e.jsx(cn,{})]})}),e.jsx(lt,{})]}),ln="_container_1hggm_1",un="_chatRoot_1hggm_17",dn="_chatContainer_1hggm_27",hn="_chatEmptyState_1hggm_43",pn="_chatEmptyStateTitle_1hggm_63",gn="_chatEmptyStateSubtitle_1hggm_77",mn="_chatMessageStream_1hggm_109",xn="_chatMessageGpt_1hggm_133",_n="_chatMessageGptMinWidth_1hggm_147",fn="_chatInput_1hggm_157",vn="_chatAnalysisPanel_1hggm_183",Cn="_chatSettingsSeparator_1hggm_199",Sn="_loadingLogo_1hggm_207",yn="_commandsContainer_1hggm_215",kn="_commandButton_1hggm_225",x={container:ln,chatRoot:un,chatContainer:dn,chatEmptyState:hn,chatEmptyStateTitle:pn,chatEmptyStateSubtitle:gn,chatMessageStream:mn,chatMessageGpt:xn,chatMessageGptMinWidth:_n,chatInput:fn,chatAnalysisPanel:vn,chatSettingsSeparator:Cn,loadingLogo:Sn,commandsContainer:yn,commandButton:kn},O="";function q(t){var n={"Content-Type":"application/json"};return z&&G==null&&t&&(n.Authorization=`Bearer ${t}`),n}async function $s(t,n){const s=await fetch(`${O}/ask`,{method:"POST",headers:q(n),body:JSON.stringify(t)}),i=await s.json();if(s.status>299||!s.ok)throw Error(i.error||"Unknown error");return i}async function Us(t,n){const s=await fetch(`${O}/askdetail`,{method:"POST",headers:q(n),body:JSON.stringify(t)}),i=await s.json();if(s.status>299||!s.ok)throw Error(i.error||"Unknown error");return i}async function Hs(t,n){const s=await fetch(`${O}/marketingqa`,{method:"POST",headers:q(n),body:JSON.stringify(t)}),i=await s.json();if(s.status>299||!s.ok)throw Error(i.error||"Unknown error");return i}async function bn(t){return await(await fetch(`${O}/config`,{method:"GET",headers:q(t)})).json()}async function jn(t,n){return await fetch(`${O}/chat`,{method:"POST",headers:q(n),body:JSON.stringify(t)})}async function Qs(t,n){return await fetch(`${O}/chatoriginal`,{method:"POST",headers:q(n),body:JSON.stringify(t)})}function Qe(t){return`${O}/content/${t}`}async function wn(t,n){console.log("writing to Blob");const s=await fetch(`${O}/appendtoBlob`,{method:"POST",headers:q(n),body:JSON.stringify({data:t})});return s.status==200?"Success":(console.error("Error appending to Blob:",s.statusText),"Problem")}var Ke=(t=>(t.Hybrid="hybrid",t.Vectors="vectors",t.Text="text",t))(Ke||{}),We=(t=>(t.TextAndImages="textAndImages",t.Images="images",t.Texts="texts",t))(We||{}),Ve=(t=>(t.Embedding="embedding",t.ImageEmbedding="imageEmbedding",t.Both="both",t))(Ve||{});const Tn="_answerContainer_1pvw0_1",Nn="_answerLogo_1pvw0_21",An="_answerText_1pvw0_29",In="_selected_1pvw0_67",Ln="_citationLearnMore_1pvw0_75",Pn="_citation_1pvw0_75",En="_followupQuestionsList_1pvw0_119",Bn="_followupQuestionLearnMore_1pvw0_127",Rn="_followupQuestion_1pvw0_119",Mn="_supContainer_1pvw0_165",zn="_retryButton_1pvw0_223",On="_loadingdots_1pvw0_267",Fn="_loading_1pvw0_267",b={answerContainer:Tn,answerLogo:Nn,answerText:An,selected:In,citationLearnMore:Ln,citation:Pn,followupQuestionsList:En,followupQuestionLearnMore:Bn,followupQuestion:Rn,supContainer:Mn,retryButton:zn,loadingdots:On,loading:Fn};function Dn(t,n,s){const i=[];let a=t.trim();if(n){let l=a.length;for(let g=a.length-1;g>=0&&a[g]!=="]";g--)if(a[g]==="["){l=g;break}a=a.substring(0,l)}return{answerHtml:a.split(/\[([^\]]+)\]/g).map((l,_)=>{if(_%2===0)return l;{let g;i.indexOf(l)!==-1?g=i.indexOf(l)+1:(i.push(l),g=i.length);const j=Qe(l);return ut(e.jsx("a",{className:"supContainer",title:l,onClick:()=>s(j),children:e.jsx("sup",{children:g})}))}}).join(""),citations:i}}const Je=()=>e.jsx(Pt,{primaryFill:"#9CBF2B","aria-hidden":"true","aria-label":"Answer logo"}),ze=({answer:t,isSelected:n,isStreaming:s,onCitationClicked:i,onThoughtProcessClicked:a,onFollowupQuestionClicked:c,showFollowupQuestions:o})=>{const l=t.choices[0].context.followup_questions,_=t.choices[0].message.content,g=r.useMemo(()=>Dn(_,s,i),[t]),j=qe.sanitize(g.answerHtml);return e.jsxs(m,{className:`${b.answerContainer} ${n&&b.selected}`,verticalAlign:"space-between",children:[e.jsx(m.Item,{children:e.jsxs(m,{horizontal:!0,horizontalAlign:"space-between",children:[e.jsx(Je,{}),e.jsx("div",{children:e.jsx(Ue,{style:{color:"black"},iconProps:{iconName:"Lightbulb"},title:"Infos anzeigen",ariaLabel:"Infos anzeigen",onClick:()=>a(),disabled:!t.choices[0].context.thoughts?.length})})]})}),e.jsxs(m.Item,{grow:!0,children:[e.jsx("div",{className:b.answerText,dangerouslySetInnerHTML:{__html:j}}),e.jsx("div",{children:"Hinweis: ATHENA befindet sich derzeit noch in der Betaphase, weshalb die Antworten möglicherweise nicht immer korrekt sein können. Bitte bewerte die erhaltenen Antworten entsprechend. Vielen Dank für dein Verständnis!"})]}),!!g.citations.length&&e.jsx(m.Item,{children:e.jsxs(m,{horizontal:!0,wrap:!0,tokens:{childrenGap:5},children:[e.jsx("span",{className:b.citationLearnMore,children:"Citations:"}),g.citations.map((C,N)=>{const P=Qe(C);return e.jsx("a",{className:b.citation,title:C,onClick:()=>i(P),children:`${++N}. ${C}`},N)})]})}),!!l?.length&&o&&c&&e.jsx(m.Item,{children:e.jsxs(m,{horizontal:!0,wrap:!0,className:`${g.citations.length?b.followupQuestionsList:""}`,tokens:{childrenGap:6},children:[e.jsx("span",{className:b.followupQuestionLearnMore,children:"Follow-up questions:"}),l.map((C,N)=>e.jsx("a",{className:b.followupQuestion,title:C,onClick:()=>c(C),children:`${C}`},N))]})})]})},Gn=()=>{const t=dt({from:{opacity:0},to:{opacity:1}});return e.jsx(ht.div,{style:{...t},children:e.jsxs(m,{className:b.answerContainer,verticalAlign:"space-between",children:[e.jsx(Je,{}),e.jsx(m.Item,{grow:!0,children:e.jsxs("p",{className:b.answerText,children:["Athena arbeitet ...",e.jsx("span",{className:b.loadingdots})]})})]})})},qn=({error:t,onRetry:n})=>e.jsxs(m,{className:b.answerContainer,verticalAlign:"space-between",children:[e.jsx(Et,{"aria-hidden":"true","aria-label":"Error icon",primaryFill:"red"}),e.jsx(m.Item,{grow:!0,children:e.jsx("p",{className:b.answerText,children:t})}),e.jsx(yt,{className:b.retryButton,onClick:n,text:"Retry"})]}),$n="_questionInputContainer_y0s15_1",Un="_questionInputTextArea_y0s15_23",Hn="_questionInputButtonsContainer_y0s15_33",Ce={questionInputContainer:$n,questionInputTextArea:Un,questionInputButtonsContainer:Hn},Qn=({onSend:t,disabled:n,placeholder:s,clearOnSend:i,initQuestion:a})=>{const[c,o]=r.useState("");r.useEffect(()=>{a&&o(a)},[a]);const l=()=>{n||!c.trim()||(t(c),i&&o(""))},_=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),l())},g=(P,E)=>{E?E.length<=3e3&&o(E):o("")},{instance:j}=J(),C=V&&!le(j),N=n||!c.trim()||C;return C&&(s="Please login to continue..."),e.jsxs(m,{horizontal:!0,className:Ce.questionInputContainer,children:[e.jsx(W,{className:Ce.questionInputTextArea,disabled:C,placeholder:s,multiline:!0,resizable:!0,autoAdjustHeight:!0,borderless:!0,value:c,onChange:g,onKeyDown:_}),e.jsx("div",{className:Ce.questionInputButtonsContainer,children:e.jsx(kt,{content:"Ask question button",relationship:"label",children:e.jsx(je,{size:"large",icon:e.jsx(Bt,{primaryFill:"#9CBF2B"}),disabled:N,onClick:l})})})]})},Kn="_examplesNavList_1qnco_1",Wn="_example_1qnco_1",Vn="_exampleText_1qnco_57",ke={examplesNavList:Kn,example:Wn,exampleText:Vn},Jn=({text:t,value:n,onClick:s})=>e.jsx("div",{className:ke.example,onClick:()=>s(n),children:e.jsx("p",{className:ke.exampleText,children:t})}),Oe=["Was ist der KP1 Satz?",'Wie viele Leser können am "INTUS ACM40e" angeschlossen werden?',"Wie binde ich via TCL ein Terminal an?"],Zn=["Formuliere eine E-Mail an den Kunden: Der Kunde beschwert über fehlerhaftes Produkt und erwartet bis morgen eine Lösung. Er ist frustriert und droht mit Eskalation an die Geschäftsführung. Er erwartet eine schnelle Lösung für das Problem.","Wie organisiere ich ein Projekt für die Einführung einer Software?"],Xn=["Wie lautet die Bestellnummer für das I5200-Interfacemodul?","Welche aktuellen RFID-Leseverfahren empfiehlt PCS?","Was beinhaltet der präventive Wartungsvertrag? "],Yn=["Verfasse einen Fachartikel für eine Zeitschrift zum Thema Zutrittskontrolle. Betone dabei die aktuellen Entwicklungen, Herausforderungen und potenzielle Lösungen in diesem Fachbereich. Achte auf eine klare Struktur, wissenschaftliche Genauigkeit und präzise Formulierungen. Der Artikel sollte informativ sein und sich an ein Fachpublikum richten, das mit den grundlegenden Konzepten des Themas vertraut ist.","Entwickle eine Reihe von praxisnahen Use Cases für das Thema Softwaremonitoring eines Zeiterfassungsterminalherstellers . Beschreibe detailliert die Anwendungsszenarien, die beteiligten Akteure, ihre spezifischen Aufgaben und die erwarteten Ergebnisse. Betone dabei die Mehrwerte und Vorteile der jeweiligen Use Cases. Berücksichtige mögliche Herausforderungen und präsentiere realistische Lösungsansätze. Ziel ist es, die Vielseitigkeit und Anwendbarkeit des Themas durch konkrete Beispiele zu veranschaulichen."],es=({onExampleClicked:t,useGPT4V:n,tabName:s})=>{const i=()=>{switch(s){case"chatgpt":return Oe;case"chatgptoriginal":return Zn;case"qa":return Xn;case"marketing":return Yn;default:return Oe}};return e.jsx("ul",{className:ke.examplesNavList,children:i().map((a,c)=>e.jsx("li",{children:e.jsx(Jn,{text:a,value:a,onClick:t})},c))})},ts="_container_1atyp_1",ns="_message_1atyp_17",Fe={container:ts,message:ns},ce=({message:t})=>e.jsx("div",{className:Fe.container,children:e.jsx("div",{className:Fe.message,children:t})}),ss="_thoughtProcess_kfzeg_1",as="_tList_kfzeg_15",os="_tListItem_kfzeg_27",is="_tStep_kfzeg_79",rs="_tCodeBlock_kfzeg_91",cs="_tProp_kfzeg_99",ls="_citationImg_kfzeg_115",us={thoughtProcess:ss,tList:as,tListItem:os,tStep:is,tCodeBlock:rs,tProp:cs,citationImg:ls};function ds(t){const n=t.split(": "),s=n[0],i=qe.sanitize(n.slice(1).join(": "));return{title:s,content:i}}const hs="_supportingContentNavList_17cb2_1",ps="_supportingContentItem_17cb2_17",gs="_supportingContentItemHeader_17cb2_45",ms="_supportingContentItemText_17cb2_53",xs="_supportingContentItemImage_17cb2_63",se={supportingContentNavList:hs,supportingContentItem:ps,supportingContentItemHeader:gs,supportingContentItemText:ms,supportingContentItemImage:xs},_s=({supportingContent:t})=>{const n=Array.isArray(t)?t:t.text,s=Array.isArray(t)?[]:t?.images;return e.jsxs("ul",{className:se.supportingContentNavList,children:[n.map(i=>{const a=ds(i);return e.jsx(fs,{...a})}),s?.map(i=>e.jsx("img",{className:se.supportingContentItemImage,src:i.url}))]})},fs=({title:t,content:n})=>e.jsxs("li",{className:se.supportingContentItem,children:[e.jsx("h4",{className:se.supportingContentItemHeader,children:t}),e.jsx("p",{className:se.supportingContentItemText,dangerouslySetInnerHTML:{__html:n}})]});var D=(t=>(t.ThoughtProcessTab="thoughtProcess",t.SupportingContentTab="supportingContent",t.CitationTab="citation",t))(D||{});const De={disabled:!0,style:{color:"grey"}},vs=({answer:t,activeTab:n,activeCitation:s,citationHeight:i,className:a,onActiveTabChanged:c})=>{t.choices[0].context.thoughts;const o=!t.choices[0].context.data_points,l=!s;return e.jsxs(bt,{className:a,selectedKey:n,onLinkClick:_=>_&&c(_.props.itemKey),children:[e.jsx(Pe,{itemKey:D.SupportingContentTab,headerText:"Unterstützende Textabschnitte",headerButtonProps:o?De:void 0,children:e.jsx(_s,{supportingContent:t.choices[0].context.data_points})}),e.jsx(Pe,{itemKey:D.CitationTab,headerText:"Dokumente",headerButtonProps:l?De:void 0,children:s?.endsWith(".png")?e.jsx("img",{src:s,className:us.citationImg}):e.jsx("iframe",{title:"Citation",src:s,width:"100%",height:i})})]})},Cs="_container_1k5c7_1",Ss={container:Cs},ys=({className:t,onClick:n})=>e.jsx("div",{className:`${Ss.container} ${t??""}`,children:e.jsx(je,{icon:e.jsx(Rt,{}),onClick:n,children:"Einstellungen"})}),ks="_container_1k5c7_1",bs={container:ks},js=({className:t,disabled:n,onClick:s})=>e.jsx("div",{className:`${bs.container} ${t??""}`,children:e.jsx(je,{icon:e.jsx(Mt,{}),disabled:n,onClick:s,children:"Chat zurücksetzen"})}),ws=()=>{const{instance:t}=J(),n=t.getActiveAccount(),s=o=>typeof o=="string"?o:JSON.stringify(o),a=(o=>Object.keys(o??{}).map(l=>{let _=l;try{const j=new URL(l).pathname.split("/");l=j[j.length-1]}catch{}return{name:l,value:s((o??{})[_])}}))(n?.idTokenClaims??G?.user_claims),c=[Ee({columnId:"name",compare:(o,l)=>o.name.localeCompare(l.name),renderHeaderCell:()=>"Name",renderCell:o=>o.name}),Ee({columnId:"value",compare:(o,l)=>o.value.localeCompare(l.value),renderHeaderCell:()=>"Value",renderCell:o=>o.value})];return e.jsxs("div",{children:[e.jsx(jt,{children:"ID Token Claims"}),e.jsxs(wt,{items:a,columns:c,sortable:!0,getRowId:o=>o.name,children:[e.jsx(Tt,{children:e.jsx(Be,{children:({renderHeaderCell:o})=>e.jsx(Nt,{children:o()})})}),e.jsx(At,{children:({item:o,rowId:l})=>e.jsx(Be,{children:({renderCell:_})=>e.jsx(It,{children:_(o)})},l)})]})]})},Ts="_evaluationContainer_1jfqt_1",Ns="_evaluationInputTextContainer_1jfqt_11",As="_evaluationInputContainer_1jfqt_25",Is="_evaluationInputTextArea_1jfqt_39",Ls="_evaluationInputButtonsContainer_1jfqt_49",T={evaluationContainer:Ts,evaluationInputTextContainer:Ns,evaluationInputContainer:As,evaluationInputTextArea:Is,evaluationInputButtonsContainer:Ls},Ge=z?J().instance:void 0,Se={dropdown:{width:300}},Ps=[{key:"ja",text:"Ja"},{key:"teils",text:"Teils"},{key:"nein",text:"Nein"},{key:"nicht beurteilbar",text:"Nicht beurteilbar"}],Es=[{key:"Suchaufwand in interner Doku erspart.",text:"Suchaufwand in interner Doku erspart."},{key:"Rücksprache mit Kollegen erspart.",text:"Rücksprache mit Kollegen erspart."},{key:"Rücksprache mit Experten erspart.",text:"Rücksprache mit Experten erspart."},{key:"Sonstiges, siehe unten:",text:"Sonstiges, siehe unten:"}],Bs=[{key:"5200",text:"5200"},{key:"5205",text:"5205"},{key:"5320",text:"5320"},{key:"5500",text:"5500"},{key:"5540",text:"5540"},{key:"5600",text:"5600"},{key:"ACM40e",text:"ACM40e"},{key:"ACM80eRack",text:"ACM80eRack"},{key:"ACM80eWand",text:"ACM80eWand"},{key:"intus com",text:"INTUS COM"},{key:"RFID-Zutrittsleser",text:"RFID-Zutrittsleser"},{key:"RFID-Technologie",text:"RFID-Technologie"},{key:"Flex Air",text:"Flex Air"},{key:"Flex OnCard ",text:"Flex OnCard"},{key:"PegaSys",text:"PegaSys"},{key:"DEXICON",text:"DEXICON"},{key:"DEXIOS",text:"DEXIOS"},{key:"INTUS COM/TPI",text:"INTUS COM/TPI"},{key:"TCL",text:"TCL"},{key:"Palm Secure",text:"Palm Secure"},{key:"Fingerprint",text:"Fingerprint"},{key:"Kaufmännisches",text:"Kaufmännisches"},{key:"Rechtliches",text:"Rechtliches"},{key:"Geräte-Firmware",text:"Geräte-Firmware"},{key:"Leser-Firmware",text:"Leser-Firmware"},{key:"Sonstiges",text:"Sonstiges"}],Rs=({disabled:t,tabName:n})=>{const[s,i]=r.useState(!1),{instance:a}=J();V&&le(a);const[c,o]=r.useState(""),l=(S,u)=>{u?u.length<=1e3&&o(u):o("")},[_,g]=r.useState(""),j=(S,u)=>{u?u.length<=1e3&&g(u):g("")},[C,N]=r.useState(""),P=(S,u)=>{u?u.length<=1e3&&N(u):N("")},[E,ue]=r.useState(""),X=(S,u)=>{u?u.length<=5e3&&ue(u):ue("")},[ae,oe]=r.useState([]),we=(S,u,w)=>{if(!u){console.log("Keine Auswahl!");return}const y=[...ae];if(u.selected)y.push(u);else{const k=y.findIndex(L=>L.key===u.key);k!==-1&&y.splice(k,1)}oe(y)},[$,de]=r.useState([]),ie=(S,u,w)=>{if(!u){console.log("Keine Auswahl!");return}const y=[...$];if(u.selected)y.push(u);else{const k=y.findIndex(L=>L.key===u.key);k!==-1&&y.splice(k,1)}de(y)},he=async()=>{const S=Ge?await ye(Ge):void 0,u=new Date,w=ae.map(B=>B.text),y=$.map(B=>B.text),k={TabName:n,Korrektheit:M?.text,korrekte_Antwort:_,Benefit:w,BenefitMinuten:E,Thema:y,Sonstiges:C,Benutzer:c,Zeitstempel:u,model:"gpt-4"},L=JSON.stringify(k)+`
`;try{const B=await wn(L,S)}catch(B){console.log(B)}finally{i(!0),o(""),N(""),g(""),oe([]),pe(void 0),setTimeout(()=>{i(!1)},6e3)}},[M,pe]=r.useState();return e.jsxs("div",{children:[s&&e.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#9CBF2B",padding:"10px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"},children:e.jsx("p",{children:"Gespeichert!"})}),e.jsxs(m,{className:T.evaluationContainer,children:[e.jsx(m,{horizontal:!0,className:T.evaluationInputContainer,children:e.jsx(ve,{label:"Ist die Antwort inhaltlich korrekt?",selectedKey:M?M.key:void 0,onChange:(S,u,w)=>{pe(u)},placeholder:"Wähle eine Option",options:Ps,styles:Se})}),(M?.text==="Nein"||M?.text==="Teils"||M?.text==="Nicht beurteilbar")&&e.jsx("div",{children:e.jsx(m,{horizontal:!0,className:T.evaluationInputTextContainer,children:e.jsx(W,{className:T.evaluationInputTextContainer,resizable:!1,placeholder:"Was hat nicht gepasst?",value:_,onChange:j})})}),e.jsx(m,{horizontal:!0,className:T.evaluationInputContainer,children:e.jsx(ve,{label:"Auf welches Thema bezog sich der Chat?",selectedKeys:$?.map(S=>S.key.toString()),onChange:ie,placeholder:"Wähle eine Option",options:Bs,styles:Se,multiSelect:!0})}),e.jsx(m,{horizontal:!0,className:T.evaluationInputContainer,children:e.jsx(ve,{label:"Was hat dir die Antwort gebracht?",selectedKeys:ae?.map(S=>S.key.toString()),onChange:we,placeholder:"Wähle eine Option",options:Es,styles:Se,multiSelect:!0})}),e.jsx(m,{horizontal:!0,className:T.evaluationInputTextContainer,children:e.jsx(W,{className:T.evaluationInputTextContainer,resizable:!1,placeholder:"Wieviel Zeitersparnis (in Minuten) hat dir Athena gebracht?",value:E,onChange:X})}),e.jsx(m,{horizontal:!0,className:T.evaluationInputTextContainer,children:e.jsx(W,{className:T.evaluationInputTextContainer,resizable:!1,placeholder:"Sonstiges: ",value:C,onChange:P})}),e.jsx(m,{horizontal:!0,className:T.evaluationInputTextContainer,children:e.jsx(W,{className:T.evaluationInputTextContainer,resizable:!1,placeholder:"Bitte gib deinen Namen an: ",value:c,onChange:l})}),e.jsx(m,{horizontal:!0,className:T.evaluationInputButtonsContainer,children:e.jsx(Ue,{style:{color:"black",marginLeft:"10px"},iconProps:{iconName:"Save"},title:"Speichern",ariaLabel:"Speichern",onClick:()=>he()})})]})]})},Ms=()=>{const[t,n]=r.useState(!1),[s,i]=r.useState(""),[a,c]=r.useState(3),[o,l]=r.useState(Ke.Hybrid),[_,g]=r.useState(!0),[j,C]=r.useState(!0),[N,P]=r.useState(!1),[E,ue]=r.useState(""),[X,ae]=r.useState(!0),[oe,we]=r.useState([Ve.Embedding]),[$,de]=r.useState(!1),[ie,he]=r.useState(!1),[M,pe]=r.useState(We.TextAndImages),[S,u]=r.useState(!1),w=r.useRef(""),y=r.useRef(null),[k,L]=r.useState(!1),[B,ge]=r.useState(!1),[Y,me]=r.useState(),[Te,xe]=r.useState(),[ee,U]=r.useState(void 0),[te,Ne]=r.useState(0),[A,re]=r.useState([]),[Ae,Ie]=r.useState([]),[Os,Ze]=r.useState(!1),Xe=async()=>{const d=H?await ye(H):void 0;bn(d).then(h=>{Ze(h.showGPT4VOptions)})},Ye=async(d,h,I,fe)=>{let R="",f={};const ot=v=>new Promise(it=>{setTimeout(()=>{R+=v;const rt={...f,choices:[{...f.choices[0],message:{content:R,role:f.choices[0].message.role}}]};Ie([...h,[d,rt]]),it(null)},33)});try{ge(!0);for await(const v of pt(fe))if(v.choices&&v.choices[0].context&&v.choices[0].context.data_points)v.choices[0].message=v.choices[0].delta,f=v;else if(v.choices&&v.choices[0].delta.content)L(!1),await ot(v.choices[0].delta.content);else if(v.choices&&v.choices[0].context)f.choices[0].context={...f.choices[0].context,...v.choices[0].context};else if(v.error)throw Error(v.error)}finally{ge(!1)}return{...f,choices:[{...f.choices[0],message:{content:R,role:f.choices[0].message.role}}]}},H=z?J().instance:void 0,ne=async d=>{w.current=d,Y&&me(void 0),L(!0),xe(void 0),U(void 0);const h=H?await ye(H):void 0;try{const fe={messages:[...A.flatMap(f=>[{content:f[0],role:"user"},{content:f[1].choices[0].message.content,role:"assistant"}]),{content:d,role:"user"}],stream:j,context:{overrides:{prompt_template:s.length===0?void 0:s,exclude_category:E.length===0?void 0:E,top:a,retrieval_mode:o,semantic_ranker:_,semantic_captions:N,suggest_followup_questions:X,use_oid_security_filter:$,use_groups_security_filter:ie,vector_fields:oe,use_gpt4v:S,gpt4v_input:M}},session_state:A.length?A[A.length-1][1].choices[0].session_state:null},R=await jn(fe,h);if(!R.body)throw Error("No response body");if(j){const f=await Ye(d,A,re,R.body);re([...A,[d,f]])}else{const f=await R.json();if(R.status>299||!R.ok)throw Error(f.error||"Unknown error");re([...A,[d,f]])}}catch(I){me(I)}finally{L(!1)}},et=()=>{w.current="",Y&&me(void 0),xe(void 0),U(void 0),re([]),Ie([]),L(!1),ge(!1)};r.useEffect(()=>y.current?.scrollIntoView({behavior:"smooth"}),[k]),r.useEffect(()=>y.current?.scrollIntoView({behavior:"auto"}),[Ae]),r.useEffect(()=>{Xe()},[]);const tt=(d,h)=>{i(h||"")},nt=(d,h)=>{de(!!h)},st=(d,h)=>{he(!!h)},at=d=>{ne(d)},Le=(d,h)=>{Te===d&&ee===D.CitationTab&&te===h?U(void 0):(xe(d),U(D.CitationTab)),Ne(h)},_e=(d,h)=>{U(ee===d&&te===h?void 0:d),Ne(h)};return e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.commandsContainer,children:[e.jsx(js,{className:x.commandButton,onClick:et,disabled:!w.current||k}),e.jsx(ys,{className:x.commandButton,onClick:()=>n(!t)})]}),e.jsxs("div",{className:x.chatRoot,children:[e.jsxs("div",{className:x.chatContainer,children:[e.jsx("h2",{children:"Athena KI-Testphase: Feedback zur Qualität im Teamskanal erwünscht!"}),e.jsx("h3",{children:'Wenn du einen Produktnamen in deiner Frage verwenden willst, gib diesen in "" an. Zum Beispiel "INTUS ACM40e".'}),w.current?e.jsxs("div",{className:x.chatMessageStream,children:[B&&Ae.map((d,h)=>e.jsxs("div",{children:[e.jsx(ce,{message:d[0]}),e.jsx("div",{className:x.chatMessageGpt,children:e.jsx(ze,{isStreaming:!0,answer:d[1],isSelected:!1,onCitationClicked:I=>Le(I,h),onThoughtProcessClicked:()=>_e(D.ThoughtProcessTab,h),onFollowupQuestionClicked:I=>ne(I),showFollowupQuestions:X&&A.length-1===h},h)})]},h)),!B&&A.map((d,h)=>e.jsxs("div",{children:[e.jsx(ce,{message:d[0]}),e.jsx("div",{className:x.chatMessageGpt,children:e.jsx(ze,{isStreaming:!1,answer:d[1],isSelected:te===h&&ee!==void 0,onCitationClicked:I=>Le(I,h),onThoughtProcessClicked:()=>_e(D.ThoughtProcessTab,h),onFollowupQuestionClicked:I=>ne(I),showFollowupQuestions:X&&A.length-1===h},h)})]},h)),k&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{message:w.current}),e.jsx("div",{className:x.chatMessageGptMinWidth,children:e.jsx(Gn,{})})]}),Y?e.jsxs(e.Fragment,{children:[e.jsx(ce,{message:w.current}),e.jsx("div",{className:x.chatMessageGptMinWidth,children:e.jsx(qn,{error:Y.toString(),onRetry:()=>ne(w.current)})})]}):null,e.jsx("div",{ref:y})]}):e.jsxs("div",{className:x.chatEmptyState,children:[e.jsx(zt,{fontSize:"120px",primaryFill:"#9CBF2B","aria-hidden":"true","aria-label":"Chat logo"}),e.jsx("h1",{className:x.chatEmptyStateTitle,children:"Chatte mit der PCS Wissensdatenbank"}),e.jsx("h2",{className:x.chatEmptyStateSubtitle,children:"Stelle eine Frage zu den PCS Geräten oder probiere eins der Beispiele"}),e.jsx(es,{onExampleClicked:at,useGPT4V:S,tabName:"chatgpt"})]}),e.jsx("div",{className:x.chatInput,children:e.jsx(Qn,{clearOnSend:!0,placeholder:"Gib eine neue Frage ein...",disabled:k,onSend:d=>ne(d)})})]}),A.length>0&&ee&&e.jsx(vs,{className:x.chatAnalysisPanel,activeCitation:Te,onActiveTabChanged:d=>_e(d,te),citationHeight:"810px",answer:A[te][1],activeTab:ee}),e.jsxs(Lt,{headerText:"Konfigurieren Sie die Erstellung von Antworten",isOpen:t,isBlocking:!1,onDismiss:()=>n(!1),closeButtonAriaLabel:"Schließen",onRenderFooterContent:()=>e.jsx($e,{onClick:()=>n(!1),children:"Close"}),isFooterAtBottom:!0,children:[e.jsx(W,{className:x.chatSettingsSeparator,defaultValue:s,label:"Prompt Vorlage überschreiben",multiline:!0,autoAdjustHeight:!0,onChange:tt}),z&&e.jsx(Re,{className:x.chatSettingsSeparator,checked:$||V,label:"Oid-Sicherheitsfilter verwenden",disabled:!le(H)||V,onChange:nt}),z&&e.jsx(Re,{className:x.chatSettingsSeparator,checked:ie||V,label:"Gruppen Sicherheitsfilter verwendenr",disabled:!le(H)||V,onChange:st}),z&&e.jsx(ws,{})]})]}),w.current?e.jsx("div",{className:x.emailBottomSection,children:e.jsx("div",{className:x.emailQuestionInput,children:!k&&!Y&&e.jsx(Rs,{disabled:k,tabName:"chat"})})}):e.jsx("div",{})]})};var be;if(z){var F=new gt(Gt);!F.getActiveAccount()&&F.getAllAccounts().length>0&&F.setActiveAccount(F.getActiveAccount()),F.addEventCallback(t=>{if(t.eventType===mt.LOGIN_SUCCESS&&t.payload){const n=t.payload;F.setActiveAccount(n)}}),be=e.jsx(St,{instance:F,children:e.jsx(Me,{})})}else be=e.jsx(Me,{});xt();const zs=_t([{path:"/",element:be,children:[{index:!0,element:e.jsx(Ms,{})},{path:"qa",lazy:()=>K(()=>import("./QA-777fc676.js"),["assets/QA-777fc676.js","assets/vendor-c3fe08cd.js","assets/EvaluationInput-a43b4d05.js","assets/fluentui-react-3f437ee8.js","assets/fluentui-icons-cc8a82c3.js","assets/EvaluationInput-a5c237a9.css","assets/QA-dac33b8b.css"])},{path:"qadetail",lazy:()=>K(()=>import("./QADetail-3ea48f4b.js"),["assets/QADetail-3ea48f4b.js","assets/vendor-c3fe08cd.js","assets/EvaluationInput-a43b4d05.js","assets/fluentui-react-3f437ee8.js","assets/fluentui-icons-cc8a82c3.js","assets/EvaluationInput-a5c237a9.css","assets/QA-dac33b8b.css"])},{path:"marketing",lazy:()=>K(()=>import("./Marketing-a988edce.js"),["assets/Marketing-a988edce.js","assets/vendor-c3fe08cd.js","assets/fluentui-react-3f437ee8.js","assets/fluentui-icons-cc8a82c3.js","assets/Marketing-e7217f74.css"])},{path:"chatgpt",lazy:()=>K(()=>import("./Chatgpt-95d8ce74.js"),["assets/Chatgpt-95d8ce74.js","assets/vendor-c3fe08cd.js","assets/fluentui-react-3f437ee8.js","assets/fluentui-icons-cc8a82c3.js","assets/Chatgpt-4ec7a749.css"])},{path:"info",lazy:()=>K(()=>import("./Info-1127de1f.js"),["assets/Info-1127de1f.js","assets/vendor-c3fe08cd.js","assets/Info-12219e66.css"])},{path:"*",lazy:()=>K(()=>import("./NoPage-327d16e8.js"),["assets/NoPage-327d16e8.js","assets/vendor-c3fe08cd.js"])}]}]);ft.createRoot(document.getElementById("root")).render(e.jsx(vt.StrictMode,{children:e.jsx(Ct,{router:zs})}));export{ze as A,js as C,es as E,We as G,Qn as Q,Ke as R,ys as S,ws as T,ce as U,Ve as V,D as a,qn as b,vs as c,bn as d,$s as e,Us as f,ye as g,wn as h,le as i,Gn as j,Qs as k,Hs as m,V as r,z as u};
//# sourceMappingURL=index-24276f89.js.map
